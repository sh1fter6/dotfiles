### GLOBAL CONFIG & VARIABLES ##
source = ~/.cache/wallust/colors-hyprland.conf

$terminal = kitty
$fileManager = thunar
$menu = rofi -show drun -theme ~/.config/rofi/launcher.rasi
$mainMod = SUPER

### MONITORS ###

monitor=,preferred,auto,1

### ENVIRONMENT VARIABLES ###

env = XCURSOR_SIZE,36
env = HYPRCURSOR_SIZE,36
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_QPA_PLATFORM,wayland;xcb
env = LIBVA_DRIVER_NAME,radeonsi
env = VDPAU_DRIVER,radeonsi
env = LANG,es_CL.UTF-8
env = LC_TIME,es_CL.UTF-8
env = LC_ALL,es_CL.UTF-8

# Scaling Overrides
env = QT_SCALE_FACTOR,1.5
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = MOZ_ENABLE_WAYLAND,1

### AUTOSTART ###

exec = hyprshade on ~/.config/hypr/shaders/vibrance.glsl
exec-once = /usr/libexec/lxqt-policykit-agent
exec-once = swww-daemon &
exec-once = env LC_ALL=es_CL.UTF-8 LANG=es_CL.UTF-8 waybar &
exec-once = gnome-keyring-daemon --start --components=secrets
exec-once = /usr/lib/kdeconnectd
exec-once = kdeconnect-indicator
exec-once = /usr/lib/xdg-desktop-portal
exec-once = /usr/lib/xdg-desktop-portal-kde
exec-once = swayosd-server --top-margin 0.05
exec-once = hypridle

### LOOK AND FEEL: GENERAL ###

general {
    gaps_in = 5
    gaps_out = 1
    border_size = 2
    col.active_border = $active_border rgba(100,100,100,0.1) 90deg
    col.inactive_border = rgba(100,100,100,0.8) rgba(100,100,100,0.2) 90deg
    resize_on_border = true
    allow_tearing = false
    layout = dwindle
    extend_border_grab_area = 20
}

### LOOK AND FEEL: DECORATION ###

decoration {
    rounding = 9
    rounding_power = 3
    active_opacity = 1.0
    inactive_opacity = 1.0
    dim_around = 0.8

    shadow {
        enabled = true
        range = 20
        render_power = 2
        color = rgba(0,0,0,0.6)
        offset = 0 2
    }

    blur {
        enabled = true
        size = 6
        passes = 1
        new_optimizations = true
        xray = false
        ignore_opacity = false
        noise = 0.15
        contrast = 1.5
        brightness = 1.0
        vibrancy = 0.5
        vibrancy_darkness = 0.5
    }
}

### LOOK AND FEEL: ANIMATIONS ###

animations {
    enabled = yes

    # Curvas Bezier
    bezier = fluent, 0.25, 1, 0.4, 1
    bezier = simple, 0, 0, 1, 1
    bezier = fastSlow, 0.1, 0.9, 0.9, 1
    bezier = smooth, 0.8, 0.2, 0.2, 0.1

    animation = windowsIn, 1, 2, default, popin 10%
    animation = windowsOut, 1, 2, fastSlow, popin 90%
    animation = border, 1, 3, fastSlow
    animation = borderangle, 1, 5, fastSlow
    animation = fade, 1, 7, fastSlow
    animation = workspaces, 1, 2, default, slidefade 50%
    animation = layersIn, 1, 2, fastSlow, popin 80%
    animation = layersOut, 1, 2, fastSlow, gnomed 80%
}

### LAYOUTS ###

dwindle {
    pseudotile = true
    preserve_split = true
}

xwayland {
    force_zero_scaling = true
}

master {
    new_status = master
}

### MISCELÁNEO ###

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = false
    vfr = true
    vrr = 1
    animate_manual_resizes = false
    focus_on_activate = true
}



### INPUT (Teclado y Touchpad) ###

input {
    kb_layout = latam
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =
    follow_mouse = 1
    sensitivity = 0

    touchpad {
        natural_scroll = true
    }
}

gesture = 3, horizontal, workspace

device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

### KEYBINDS ###

# Aplicaciones Esenciales
bind = $mainMod, return, exec, $terminal
bind = $mainMod SHIFT, return, exec, kitty --class floating_shell
bind = $mainMod, space, exec, $menu
bind = $mainMod, q, killactive

# Gestión de Ventanas
bind = $mainMod, V, togglefloating
bind = $mainMod, V, resizeactive, exact 60% 60%
bind = $mainMod, V, centerwindow
bind = $mainMod, P, pseudo
bind = $mainMod, Shift_R, togglesplit
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Izquierda/Derecha: Mover y alternar flotante (comportamiento dock/undock)
bind = $mainMod, left, exec, hyprctl dispatch togglefloating; hyprctl dispatch movewindow l
bind = $mainMod, right, exec, hyprctl dispatch togglefloating; hyprctl dispatch movewindow r

# Arriba/Abajo: Intercambiar posiciones (mantiene el apilado vertical)
bind = $mainMod, up, swapwindow, u
bind = $mainMod, down, swapwindow, d

# Redimensionar Ventanas (10% de aumento/reducción)
bind = $mainMod SHIFT, left, resizeactive, -100 0
bind = $mainMod SHIFT, right, resizeactive, 100 0
bind = $mainMod SHIFT, up, resizeactive, 0 -100
bind = $mainMod SHIFT, down, resizeactive, 0 100

# Lanzadores de Aplicaciones
bind = $mainMod, B, exec, brave-browser
bind = $mainMod SHIFT, B, exec, brave-browser --incognito
bind = $mainMod, C, exec, google-chrome
bind = $mainMod, A, exec, $fileManager
bind = $mainMod SHIFT, A, exec, [float; center; size 700 400] $fileManager
bind = $mainMod, N, exec, kitty -e ranger
bind = $mainMod SHIFT, N, exec, kitty --class ranger -e ranger
bind = $mainMod, D, exec, flatpak run dev.vencord.Vesktop
bind = $mainMod, S, exec, spotify
bind = $mainMod, E, exec, zapzap

# Espacios de Trabajo (Workspaces)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Workspace Especial (Magic)
bind = $mainMod, i, togglespecialworkspace, magic
bind = $mainMod SHIFT, i, movetoworkspace, special:magic

# Capturas de Pantalla y Controles de Mouse
# Captura con freeze: toma snapshot ANTES de mostrar la interfaz
# Shift+Print: guarda con corrección de color (invierte el shader)
bind = SHIFT, Print, exec, ~/.config/hypr/scripts/hyprshot-corrected.sh -m region --freeze
bind = , Print, exec, hyprshot -m region --freeze --clipboard-only

# Controles de Hardware (Audio y Brillo)
bindel = ,XF86AudioRaiseVolume, exec, swayosd-client --output-volume raise --max-volume 150 && pw-play ~/Descargas/volume.wav
bindel = ,XF86AudioLowerVolume, exec, swayosd-client --output-volume lower --max-volume 150 && pw-play ~/Descargas/volume.wav
bindel = ,XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindel = ,XF86AudioMicMute, exec, swayosd-client --input-volume mute-toggle
bindel = ,XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bindel = ,XF86MonBrightnessDown, exec, swayosd-client --brightness lower
bind = ALT, XF86AudioRaiseVolume, exec, swayosd-client --input-volume raise
bind = ALT, XF86AudioLowerVolume, exec, swayosd-client --input-volume lower

# Control de Multimedia
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# Scripts y Sistema
bind = $mainMod, W, exec, ~/.config/hypr/scripts/wallpaper-select.sh
bind = $mainMod SHIFT, W, exec, ~/.config/hypr/scripts/lain-mode.sh
bind = $mainMod SHIFT, e, exec, bash -c "sleep 1 && hyprctl dispatch exit"


### WINDOW RULES ###

# Kitty
windowrulev2 = opacity 1.0 0.9, class:^(kitty)$
windowrulev2 = float, class: ^(float_kitty)$
windowrulev2 = size 700 420, class:^(floating_shell)$
windowrulev2 = float, class:^(floating_shell)$

# Ranger
windowrulev2 = float, class:^(ranger)$
windowrulev2 = center, class:^(ranger)$
windowrulev2 = size 60% 60%, class:^(ranger)$

# imv (Visor de Imágenes)
windowrulev2 = float, class:^(imv)$
windowrulev2 = dimaround, class:^(imv)$
windowrulev2 = center, class:^(imv)$
windowrulev2 = size 80% 80%, class:^(imv)$

# Thunar y Gestores de Archivos
windowrulev2 = float, class:^(ark)$
windowrulev2 = float, class:^(org.gnome.FileRoller)$
windowrulev2 = float, class:^(thunar)$, title:^Renombrar.*
windowrulev2 = float, class:^(Thunar)$, title:^Progreso.*
windowrulev2 = float, class:^(thunar)$, title:^(Progreso de las operaciones de archivo)$

# Navegadores (Brave y Chrome)

windowrulev2 = float, class:^(brave)$, title:^(Imprimir)$
windowrulev2 = float, class:^(google-chrome)$, title:^(Imprimir)$

windowrulev2 = float, class:^(brave-browser)$, initialTitle:^(Sin título - Brave)$

# Redes sociales
windowrulev2 = bordersize 0, initialTitle:^(Discord)$
windowrulev2 = noborder, class:^(vesktop)$
windowrulev2 = focusonactivate, class:^(discord)$
windowrulev2 = float, class:^(ZapZap)$
windowrulev2 = size 700 350, class:^(ZapZap)$

# Multimedia y Audio (Pavucontrol y Amberol)
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = size 300 220, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = move 1000 40, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, class:^(io.bassi.Amberol)$

# Red y Bluetooth
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 400 300, class:^(nm-connection-editor)$
windowrulev2 = move 960 40, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(wifi-menu-nmtui)$
windowrulev2 = center, class:^(wifi-menu-nmtui)$
windowrulev2 = size 600 400, class:^(wifi-menu-nmtui)$

# Waybar Menus

windowrulev2 = float, class:^(com.waybar.bluetooth)$
windowrulev2 = size 380 450, class:^(com.waybar.bluetooth)$
windowrulev2 = move 100%-390 50, class:^(com.waybar.bluetooth)$
windowrulev2 = float, class:^(com.waybar.audio)$
windowrulev2 = size 380 480, class:^(com.waybar.audio)$
windowrulev2 = move 100%-390 50, class:^(com.waybar.audio)$

# Diálogos del Sistema y Portales
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = size 70% 60%, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float, class:(lxqt-policykit-agent)
windowrulev2 = center, class:(lxqt-policykit-agent)
windowrulev2 = size 510 230, class:(lxqt-policykit-agent)
windowrulev2 = dimaround, class:(lxqt-policykit-agent)
windowrulev2 = stayfocused, class:(lxqt-policykit-agent)

# Apariencia (nwg-look)
windowrulev2 = float, class:^(nwg-look)$
windowrulev2 = size 800 300, class:^(nwg-look)$

#wine
windowrulev2 = tile, class:^(wine)$
windowrulev2 = float, class:^(wine)$, title:^(.*Preferences.*)$
windowrulev2 = float, class:^(wine)$, title:^(.*Settings.*)$
windowrulev2 = tile, class:\.exe$

# Otros
windowrulev2 = idleinhibit focus, class:^(sh3.exe)$
windowrulev2 = float, class:^(mousepad)$
windowrulev2 = size 400 300, class:^(mousepad)$

# Layer Rules (para blur en capas como notificaciones)
layerrule = blur, swaync-notification-window
layerrule = blur, swaync-control-center
layerrule = ignorezero, swaync-notification-window
layerrule = ignorezero, swaync-control-center
layerrule = ignorealpha 0.5, swaync-notification-window
layerrule = ignorealpha 0.5, swaync-control-center

# SwayOSD Blur Rules
layerrule = blur, swayosd
layerrule = ignorezero, swayosd
layerrule = ignorealpha 0.5, swayosd



